# 慎用Java递归

### 一、问题概述

所做的功能是一个BOM提取的操作（类似硬盘文件扫描），使用递归的方法虽然逻辑比较清晰，但是BOM很大的时候会有栈溢出的情况出现。

首先需要了解 Java 的内存分配机制：
Java 的内存分配主要是由堆和栈分配，堆是线程共有的内存空间，栈是线程私有的，栈的内存回收就是一个线程的生命周期，而使用递归所导致的问题恰好就是跟栈内存有关。
当一个方法执行完毕的时候，会产生一些跟这个方法相关的信息，例如：方法名，参数，中间变量等等，这些产生的东西叫做栈帧，只有当一个方法执行完毕的时候，这个栈帧才会从栈顶 pop 掉；在使用递归的情况下，会一直往栈内存中 push 栈帧，而栈的空间是有一定的大小限制的，当超出内存时，就会发生溢出，程序就会出现栈异常的异常。

### 二、处理方案

使用循环替代递归，根据集合的长度进行循环，而在循环里添加元素到集合中，改变集合长度