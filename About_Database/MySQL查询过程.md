# MySQL 查询过程

## 一、连接器

连接器连接，用户权限验证

>  使用长连接保持会话，长时间会占用很大内存，MySQL 5.7 版本后 Java API 可以调用 `mysql_reset_connection` 来重新初始化连接资源，这个过程不需要重连和重新做权限验证，但是会将连接恢复到刚刚创建完时的状态。

## 二、查询缓存

MySQL 8.0 版本直接将查询缓存的整块功能弃用

> 因为查询缓存存在严重的可伸缩性问题，并且很容易成为严重的瓶颈。
>
> 自 MySQL 5.6（2013）以来，默认情况下已禁用查询缓存，因为众所周知，它不能与多核计算机上在高吞吐量工作负载情况下进行扩展。

## 三、分析器

语法分析器会根据语法规则，判断你输入的这个 SQL 语句是否满足 MySQL 语法

## 四、优化器

表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序

## 五、执行器

具体执行语句，对每一行进行遍历，直到取到这个表的最后一行。执行器将上述遍历过程中所有满足条件的行组成的记录集作为结果返回给客户端

<img src=".\assets\LXRtEKM754QwDlx.png" alt="mysql查询流程" style="zoom:67%;" />

